# Clickhouse, Vector, LightHouse and Nginx

## Что делает playbook:

Playbook разворачивает на 3 хостах приложения:
- Clickhouse-client
- Clickhouse-server
- Clickhouse-common
- Vector
- Nginx
- LightHouse

1. Скачивает дистрибутив clickhouse-server и сlickhouse-client по указанному пути с указанными именами файлов. Устанавливает clickhouse-server и сlickhouse-client, создает базу данных на первом хосте. Для запуска должен быть открыт порт 9000.

2. Скачивает дистрибутив Vector по указанному пути с указанным именем файла. Устанавливает дистрибутив на второй хост. Создает файл параметров из шаблона. После выполнения действий запускает Vector с указанными параметрами в фоновом режиме.

3. Скачивается, устанавливается и конфигурируется на третий хост web-сервер Nginx. Затем, на тот же хост скачивается Lighthouse, создается его файл web-конфигурации по указанному шаблону и перезапускается web-сервер Nginx.

## Параметры

- IP и способ подключения к целевому хосту необходимо указать в prod.yml, там же указывается пользователь и путь к файлу ключа ssh.
- версии и архитектура пакетов, пути и остальные необходимые параметры указываются в файлах vars.yml

## Запуск

- Для запуска playbook нужно выполнить команду
```ansible-playbook -i inventory/prod.yml site.yml```, где ```inventory/prod.yml``` - путь к Inventory файлу, ```site.yml``` - файл playbook. 