# Домашнее задание к занятию "`Обновление приложений`" - `Барышников Никита`


## Цель задания

Выбрать и настроить стратегию обновления приложения.

### Задание 1. Выбрать стратегию обновления приложения и описать ваш выбор
<details>
	<summary></summary>
      <br>

1. Имеется приложение, состоящее из нескольких реплик, которое требуется обновить.
2. Ресурсы, выделенные для приложения, ограничены, и нет возможности их увеличить.
3. Запас по ресурсам в менее загруженный момент времени составляет 20%.
4. Обновление мажорное, новые версии приложения не умеют работать со старыми.
5. Вам нужно объяснить свой выбор стратегии обновления приложения.

</details>

#### Решение:

Так как запас ресурсов, выделенных для приложений, ограничен и в менее загруженный момент времени составляет 20%, то, скорее всего, в кластере нет возможности одновременно запустить несколько реплик новых и старых версий приложений, поэтому считаю, что в данном случае будет оптимальнее всего использовать стратегию обновления **Rolling update** (постепенное обновление).  
**Rolling update** - это стандартная стратегия развёртывания в Kubernetes. Она постепенно, один за другим заменяет поды со старой версией приложения на поды с новой версией без простоя кластера.  
Для обновления в манифест необходимо будет добавить:
```yaml
strategy:
type: RollingUpdate
rollingUpdate:
maxSurge: 20%
maxUnavailable: 20%
```

Параметр `maxSurge: 20%` позволит дополнительно запустить 20% реплик с новой версией приложения помимо уже имеющихся.  
Параметр `maxUnavailable: 20%` позволит уничтожить 20% реплик со старой версией приложения в процессе обновления, чтобы освободить ресурсы для реплик с новой версией приложения.

Также необходимо отметить, что обновления лучше всего проводить в менее загруженный момент времени.

---