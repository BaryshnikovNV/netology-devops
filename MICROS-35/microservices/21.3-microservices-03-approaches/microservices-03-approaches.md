# Домашнее задание к занятию "`Микросервисы: подходы`" - `Барышников Никита`


## Задача 1: Обеспечить разработку
<details>
	<summary></summary>
      <br>

Предложите решение для обеспечения процесса разработки: хранение исходного кода, непрерывная интеграция и непрерывная поставка. 
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- облачная система;
- система контроля версий Git;
- репозиторий на каждый сервис;
- запуск сборки по событию из системы контроля версий;
- запуск сборки по кнопке с указанием параметров;
- возможность привязать настройки к каждой сборке;
- возможность создания шаблонов для различных конфигураций сборок;
- возможность безопасного хранения секретных данных (пароли, ключи доступа);
- несколько конфигураций для сборки из одного репозитория;
- кастомные шаги при сборке;
- собственные докер-образы для сборки проектов;
- возможность развернуть агентов сборки на собственных серверах;
- возможность параллельного запуска нескольких сборок;
- возможность параллельного запуска тестов.

Обоснуйте свой выбор.

</details>

### Решение:

В качестве решения для обеспечения процесса разработки я бы рассмотрел Gitlab.

Gitlab — это инструмент с открытым исходным кодом и CI/CD. Он поддерживает полноценную платформу DevOps, предоставляет комплексные возможности DevOps и позволяет компаниям взаимодействовать с различными командами, работая над всеми задачами, связанными с проектом, такими как планирование проекта, управление репозиторием кода, мониторинг и безопасность.

Его отличительной особенностью являются:  
- мониторинг производительности приложений (отображает показатели производительности для каждого отдельного приложения);
- самоконтроль (доступны функции самоконтроля, которые упрощают развертывание и обслуживание общего программирования);
- предупреждение о производительности (программистам разрешено создавать оповещения уровня сервиса для любого происходящего события);
- реестр контейнеров (он предоставляет контейнер для реестра для обеспечения безопасности в случае с образами docker).

Еще одним приемуществом является наличие возможности трех вариантов схемы развертования Gitlab: SaaS-решение, on-premise-решение и управляемое решение в облаке.

Также, с недавних пор у Gitlab появился GitLab Secrets Manager для хранения их конфиденциальных учетных данных, которые должны храниться в тайне (“secret”), что позволяет отказать от использования встроенной интеграции с внешними менеджерами секретов, такими как HashiCorp Vault или Azure Key Vault.

---

## Задача 2: Логи
<details>
	<summary></summary>
      <br>

Предложите решение для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- сбор логов в центральное хранилище со всех хостов, обслуживающих систему;
- минимальные требования к приложениям, сбор логов из stdout;
- гарантированная доставка логов до центрального хранилища;
- обеспечение поиска и фильтрации по записям логов;
- обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов;
- возможность дать ссылку на сохранённый поиск по записям логов.

Обоснуйте свой выбор.

</details>

### Решение:

Сейчас основное решение — система сбора логов, построенная на основе стека технологий **Elasticsearch**, **Logstash** и **Kibana** **(ELK)**.  
Этот стек позволяет «из коробки» получить средство агрегации и трансформации, хранения и визуализации данных логирования.

Данный стек состоит из:  
- **Filebeat** — эффективное средство сбора данных логирования из файлов и отправки в logstash/elasticsearch;
- **Logstash** — инструмент для приёма данных, их преобразования и отправки в кластер БД Elasticsearch;
- **Elasticsearch** — база данных, адаптированная для полнотекстового поиска;
- **Kibana** — эффективное средство визуализации данных логов.

Основными достоинствами ELK-стека считаются следующие:
- **Масштабируемость** – кластер Elasticsearch (ES) расширяется «на лету» добавлением новых серверов. При этом распределение нагрузки по узлам происходит автоматически.
- **Отказоустойчивость** — в случае сбоя кластерных узлов данные не потеряются, а будут перераспределены, и поисковая система сама продолжит работу. Операционная стабильность достигается ведением логов на каждое изменение данных в хранилище сразу на нескольких узлах кластера.
- **Гибкость поисковых фильтров**, включая нечеткий поиск, возможности работы с восточными языками (китайский, японский, корейский) и мультиарендность, когда в рамках одного объекта ES можно динамически организовать несколько различных поисковых систем. Благодаря наличию встроенных анализаторов текста Elasticsearch автоматически выполняет токенизацию, лемматизацию, стемминг и прочие преобразования текста для решения NLP-задач, связанных с поиском данных.
- **Управляемость ES** по HTTP с помощью JSON-запросов за счет REST API и визуального веб-интерфейса Kibana.
- **Универсальность** – Logsatsh в потоковом режиме работает одновременно со множеством разных источников данных (СУБД, файлы, системные логи, веб-приложения и пр.), фильтруя и преобразуя их для отправки в хранилище ES. А NoSQL-природа Elasticsearch (отсутствие схемы) позволяет загружать в него JSON-объекты, которые автоматически индексируются и добавляются в базу поиска. Это позволяет ускорить прототипирование поисковых Big Data решений.

В качестве алтернативы filebeat и logstash можно рассмотреть **Vector**, а вместо Elasticsearch - **Clickhouse**.

---