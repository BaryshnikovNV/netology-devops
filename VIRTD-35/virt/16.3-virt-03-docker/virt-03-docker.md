# Домашнее задание к занятию "`Введение. Экосистема. Архитектура. Жизненный цикл Docker-контейнера`" - `Барышников Никита`


## Задание 1.
<details>
	<summary></summary>
      <br>

Сценарий выполнения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберите любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```

Опубликуйте созданный fork в своём репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

</details>

### Решение:

Ссылка на Docker-образ из DockerHub: https://hub.docker.com/layers/baryshnikovnv/nginx/add_index.html/images/sha256-75dd57ddad3f370b5ea6077960e84ba281109fec9b2aa4d368391d01976b6fb7?context=repo

---

## Задание 2.
<details>
	<summary></summary>
      <br>

Посмотрите на сценарий ниже и ответьте на вопрос:
«Подходит ли в этом сценарии использование Docker-контейнеров или лучше подойдёт виртуальная машина, физическая машина? Может быть, возможны разные варианты?»

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- высоконагруженное монолитное Java веб-приложение;
- Nodejs веб-приложение;
- мобильное приложение c версиями для Android и iOS;
- шина данных на базе Apache Kafka;
- Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;
- мониторинг-стек на базе Prometheus и Grafana;
- MongoDB как основное хранилище данных для Java-приложения;
- Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.

</details>

### Решение:

- **Высоконагруженное монолитное Java веб-приложение** лучше развернуть на физическом сервере. Так как приложение монолитное, то его сложно будет разбить на микросервисы. Необходим прямой доступ к ресурсам;
- **Nodejs веб-приложение** лучше развернуть в docker. Это веб приложение, для таких приложений достаточно докера. Это решение позволит быстро развернуть приложение со всеми необходимыми библиотеками;
- **Мобильное приложение c версиями для Android и iOS** лучше развернуть на виртуальной машине. В данном случае необходим GUI, а docker его не поддерживает.
- **Шина данных на базе Apache Kafka** лучше развернуть на docker. Это сервис по трансляции данных. В данном случе лучше использовать контейнеризацию, так как отсутствуют накладные расходы на виртуализацию, достигается простота масштабирования и управления.
- **Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana** лучше развернуть на docker. Все эти сервисы можно быстро развернуть в контейнерах. Также, Docker будет удобней для кластеризации.
- **Мониторинг-стек на базе Prometheus и Grafana** лучше подойдет docker. Данные системы мониторинга можно быстро развернуть в контейнерах и легко масштабировать при необходимости.
- **MongoDB как основное хранилище данных для Java-приложения** можно развернуть как в docker, так и на физическом сервере. Все зависит от нагрзуки на БД. Если нагрузка не большая то удобнее всего это сделать в docker, в противном случе - физический сервер;
- **Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry** в данном случае можно использовать и виртуальную машину и docker контейнер. Docker позволит масштабировать решение, так же удобно обновлять приложение без большого простоя сервиса. Использование виртуальной машины позволит удобно администрировать сервис;

---

## Задание 3.
<details>
	<summary></summary>
      <br>

- Запустите первый контейнер из образа ***centos*** c любым тегом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```.
- Добавьте ещё один файл в папку ```/data``` на хостовой машине.
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

</details>

### Решение:

Запустим первый контейнер из образа ***centos***, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера:
```bash
sudo docker run -it -v $(pwd):/data --name centos centos:centos7
```

Запустим второй контейнер из образа ***debian***, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера:
```bash
sudo docker run -it -v $(pwd):/data --name debian debian:stable
```

Создадим в первом контейнере текстовый файл file1 c числами от 1 до 10 в ```/data```:
```bash
touch file1 && seq 10 > file1
```

Скриншот 1 - Создание file1 в первом контейнере.
![Скриншот-1](/VIRTD-35/virt/16.3-virt-03-docker/img/16.3.3.1_Создание_file1_в_первом_контейнере.png)

Добавим ещё один файл file2 c числами от 1 до 20 в папку ```/data``` на хостовой машине:
```bash
touch file2 && seq 20 > file2
```

Скриншот 2 - Создание file2 на хостовой машине.
![Скриншот-2](/VIRTD-35/virt/16.3-virt-03-docker/img/16.3.3.2_Создание_file2_на_хостовой_машине.png)

Отобразим на втором контейнере листинг и содержание файлов в ```/data```:

Скриншот 3 - Листинг и содержание файлов в ```/data``` на втором контейнере.
![Скриншот-3](/VIRTD-35/virt/16.3-virt-03-docker/img/16.3.3.3_Листинг_и_содержание_файлов_в_data_на_втором_контейнере.png)

---

## Задание 4 (*).
<details>
	<summary></summary>
      <br>

Воспроизведите практическую часть лекции самостоятельно.

Соберите Docker-образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.

</details>

### Решение:



---